<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Docly AI - Criador de ConteÃºdo IA</title>
<style>
body {font-family:'Arial',sans-serif; margin:0; padding:0; background:#f0f2f5; color:#1f2937;}
header {text-align:center; padding:20px; background:linear-gradient(90deg,#3b82f6,#6366f1); color:white; font-size:26px; font-weight:bold; box-shadow:0 4px 6px rgba(0,0,0,0.1);}
.container {max-width:1000px; margin:20px auto; padding:15px;}
.card {background:white; border-radius:16px; padding:25px; margin-bottom:20px; box-shadow:0 6px 15px rgba(0,0,0,0.1);}
.card input,.card textarea,.card select,.card button {width:100%; margin:10px 0; padding:14px; border-radius:10px; border:1px solid #d1d5db; font-size:16px;}
.card button {background:#10b981; color:white; font-weight:bold; cursor:pointer; transition:0.3s;}
.card button:hover {background:#059669;}
#resultado {background:#1f2937; color:#f8fafc; padding:20px; border-radius:16px; white-space: pre-wrap; margin-top:15px; max-height:400px; overflow-y:auto; font-size:16px;}
.timeline {display:flex; flex-direction:column; align-items:center; margin-top:25px; transition:all 0.3s ease;}
.timeline-step {background:linear-gradient(135deg,#3b82f6,#6366f1); color:white; padding:14px; margin:10px 0; border-radius:12px; text-align:center; font-weight:bold; width:200px; transition:all 0.3s ease; box-shadow:0 4px 8px rgba(0,0,0,0.15);}
.timeline-step.active {background:linear-gradient(135deg,#f59e0b,#f97316); transform:scale(1.05); box-shadow:0 6px 15px rgba(0,0,0,0.2);}
@media(min-width:768px){
  .timeline{flex-direction:row; flex-wrap:wrap; justify-content:center; gap:20px;}
  .timeline-step{flex:1 1 180px; margin:10px;}
}
</style>
</head>
<body>

<header>Docly AI - Criador de ConteÃºdo IA</header>

<div class="container">

<div class="card">
  <select id="tipo">
    <option value="">Escolha o tipo de conteÃºdo</option>
    <option value="roteiro">ðŸŽ¬ Roteiro de VÃ­deo</option>
    <option value="pdf">ðŸ“„ PDF / Documento</option>
    <option value="trabalho">ðŸŽ“ Trabalho Escolar</option>
    <option value="curriculo">ðŸ’¼ CurrÃ­culo</option>
    <option value="historia">ðŸ“– HistÃ³ria</option>
  </select>

  <input id="nome" placeholder="Nome do usuÃ¡rio / aluno">
  <input id="serie" placeholder="SÃ©rie / Ano (Trabalho Escolar)">
  <input id="telefone" placeholder="Telefone / Contato (PDF ou CurrÃ­culo)">
  <textarea id="tema" placeholder="Tema / Assunto"></textarea>

  <button onclick="gerar()">Gerar ConteÃºdo</button>
</div>

<div class="card">
  <pre id="resultado">O conteÃºdo gerado aparecerÃ¡ aqui...</pre>
</div>

<div class="timeline" id="timeline"></div>

</div>

<script>
const palavrasSensiveis = ["violÃªncia extrema","drogas ilegais","ataques","conteÃºdo ilegal"];
const usuarios = {};

async function gerar() {
  const tipo = document.getElementById("tipo").value;
  const nome = document.getElementById("nome").value;
  const serie = document.getElementById("serie").value;
  const telefone = document.getElementById("telefone").value;
  const tema = document.getElementById("tema").value;
  const resultado = document.getElementById("resultado");
  const timeline = document.getElementById("timeline");

  if(!tipo){ alert("Escolha um tipo de conteÃºdo"); return; }
  if(!tema){ alert("Digite um tema ou assunto"); return; }

  const usuarioId = "user_local"; 
  if(!usuarios[usuarioId]) usuarios[usuarioId] = { cont:0, bloqueio:0 };
  const agora = Date.now();
  if(usuarios[usuarioId].bloqueio > agora){
    const hora = new Date(usuarios[usuarioId].bloqueio).toLocaleTimeString();
    alert(`VocÃª estÃ¡ suspenso atÃ© ${hora} por tentar gerar conteÃºdo proibido.`);
    return;
  }

  if(palavrasSensiveis.some(p => tema.toLowerCase().includes(p))){
    usuarios[usuarioId].cont += 1;
    const horas = Math.pow(2, usuarios[usuarioId].cont-1);
    usuarios[usuarioId].bloqueio = agora + horas*60*60*1000;
    alert(`Tema proibido detectado! VocÃª serÃ¡ suspenso por ${horas} hora(s).`);
    return;
  }

  resultado.innerText = "â³ Gerando conteÃºdo com IA... aguarde...";
  timeline.innerHTML = "";

  let prompt = "";
  let etapas = [];

  if(tipo === "roteiro"){
    prompt = `Crie um roteiro completo de vÃ­deo sobre o tema: ${tema}. Inclua abertura, introduÃ§Ã£o, desenvolvimento, clÃ­max e conclusÃ£o.`;
    etapas = ["Abertura","IntroduÃ§Ã£o","Desenvolvimento","ClÃ­max","ConclusÃ£o"];
  } else if(tipo === "pdf"){
    prompt = `Crie um PDF profissional sobre o tema: ${tema}. Inclua telefone/contato: ${telefone}, introduÃ§Ã£o, desenvolvimento e conclusÃ£o.`;
    etapas = ["IntroduÃ§Ã£o","Desenvolvimento","ConclusÃ£o"];
  } else if(tipo === "trabalho"){
    prompt = `Crie um trabalho escolar detalhado para o aluno ${nome}, sÃ©rie ${serie}, sobre o tema ${tema}. Inclua introduÃ§Ã£o, desenvolvimento, conclusÃ£o e referÃªncias.`;
    etapas = ["IntroduÃ§Ã£o","Desenvolvimento","ConclusÃ£o"];
  } else if(tipo === "curriculo"){
    prompt = `Crie um currÃ­culo profissional para ${nome}, telefone/contato: ${telefone}, objetivo: ${tema}. Inclua experiÃªncia, formaÃ§Ã£o e habilidades detalhadas.`;
    etapas = ["Objetivo","ExperiÃªncia","FormaÃ§Ã£o","Habilidades"];
  } else if(tipo === "historia"){
    prompt = `Crie uma histÃ³ria original sobre o tema ${tema}. Inclua introduÃ§Ã£o, desenvolvimento, clÃ­max e conclusÃ£o detalhados.`;
    etapas = ["IntroduÃ§Ã£o","Desenvolvimento","ClÃ­max","ConclusÃ£o"];
  }

  // Cria timeline
  timeline.innerHTML = etapas.map(e => `<div class="timeline-step">${e}</div>`).join("");

  try {
    const response = await fetch("https://api.openai.com/v1/chat/completions", {
      method:"POST",
      headers:{
        "Content-Type":"application/json",
        "Authorization":"Bearer SUA_CHAVE_API_AQUI"
      },
      body: JSON.stringify({
        model:"gpt-4",
        messages:[{role:"user", content: prompt}],
        max_tokens:3000
      })
    });

    const data = await response.json();
    console.log(data); // debug

    // Tenta mostrar qualquer conteÃºdo que vier, sem exibir erros
    if(data?.choices?.[0]?.message?.content){
      resultado.innerText = data.choices[0].message.content;
      document.querySelectorAll(".timeline-step").forEach(step => step.classList.add("active"));
    }

  } catch(err){
    // Nenhuma mensagem de erro Ã© mostrada
    console.log("Erro na API:", err);
  }
}
</script>

</body>
</html>
