<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Currículo com IA</title>

<style>
body {
  background:#e5e7eb;
  font-family: Arial, sans-serif;
}

.box {
  max-width:600px;
  margin:40px auto;
  background:#f9fafb;
  padding:25px;
  border:2px solid #2563eb;
  border-radius:10px;
}

textarea {
  width:100%;
  height:120px;
  margin-bottom:15px;
  padding:10px;
  border:2px solid #2563eb;
  border-radius:6px;
}

button {
  width:100%;
  padding:12px;
  background:#2563eb;
  color:#fff;
  border:none;
  border-radius:6px;
  font-size:16px;
}

#timer {
  margin-top:12px;
  font-weight:bold;
  color:#2563eb;
}

#resultado {
  margin-top:15px;
  padding:15px;
  border:2px solid #2563eb;
  border-radius:6px;
  white-space:pre-wrap;
}
</style>
</head>

<body>

<div class="box">
  <h2>Seu currículo feito sob medida para cada vaga</h2>

  <textarea id="curriculo" placeholder="Cole seu currículo"></textarea>
  <textarea id="vaga" placeholder="Cole a descrição da vaga"></textarea>

  <button onclick="gerar()">Gerar currículo otimizado</button>

  <div id="timer"></div>
  <div id="resultado"></div>
</div>

<script>
let respostaIA = null;
let tempoFinalizado = false;

function gerar() {
  respostaIA = null;
  tempoFinalizado = false;

  const resultado = document.getElementById("resultado");
  const timer = document.getElementById("timer");

  resultado.innerText = "";
  let tempo = 20;
  timer.innerText = "⏳ Gerando... " + tempo + "s";

  fetch("https://SEU-BACKEND.onrender.com/gerar", {
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body: JSON.stringify({
      curriculo: document.getElementById("curriculo").value,
      vaga: document.getElementById("vaga").value
    })
  })
  .then(r => r.json())
  .then(d => {
    respostaIA = d.resultado;
    if (tempoFinalizado) resultado.innerText = respostaIA;
  });

  const intervalo = setInterval(() => {
    tempo--;
    timer.innerText = "⏳ Gerando... " + tempo + "s";

    if (tempo <= 0) {
      clearInterval(intervalo);
      tempoFinalizado = true;
      timer.innerText = "✅ Concluído";
      if (respostaIA) resultado.innerText = respostaIA;
    }
  }, 1000);
}
</script>

</body>
</html>
