<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Docly AI - Criador de Conte√∫do IA</title>
<style>
body {font-family: Arial, sans-serif; margin:0; padding:0; background:#f4f6f9; color:#333;}
header {text-align:center; padding:20px; background:linear-gradient(90deg,#6a11cb,#2575fc); color:white; font-size:24px; font-weight:bold;}
.container {max-width:1000px; margin:20px auto; padding:15px;}
.card {background:white; border-radius:12px; padding:20px; margin-bottom:15px; box-shadow:0 4px 12px rgba(0,0,0,0.1);}
.card input,.card textarea,.card select,.card button {width:100%; margin:8px 0; padding:12px; border-radius:8px; border:1px solid #ccc; font-size:16px;}
.card button {background:#22c55e; color:white; font-weight:bold; cursor:pointer; transition:0.3s;}
.card button:hover {background:#16a34a;}
#resultado {background:#020617; color:#f8fafc; padding:15px; border-radius:12px; white-space: pre-wrap; margin-top:10px; max-height:400px; overflow-y:auto; font-size:16px;}
.timeline {display:flex; flex-direction:column; align-items:center; margin-top:20px; transition:all 0.3s ease;}
.timeline-step {background:#1e293b; color:white; padding:12px; margin:8px 0; border-left:4px solid #22c55e; border-radius:8px; text-align:center; transition:all 0.3s ease;}
.timeline-step.active {border-left:4px solid #3b82f6; background:#2563eb;}
@media(min-width:768px){
  .timeline{flex-direction:row; flex-wrap:wrap; justify-content:center; gap:15px;}
  .timeline-step{flex:1 1 180px; margin:5px;}
}
</style>
</head>
<body>

<header>Docly AI - Criador de Conte√∫do IA</header>

<div class="container">

<div class="card">
  <select id="tipo">
    <option value="">Escolha o tipo de conte√∫do</option>
    <option value="roteiro">üé¨ Roteiro de V√≠deo</option>
    <option value="pdf">üìÑ PDF / Documento</option>
    <option value="trabalho">üéì Trabalho Escolar</option>
    <option value="curriculo">üíº Curr√≠culo</option>
    <option value="historia">üìñ Hist√≥ria</option>
  </select>

  <input id="nome" placeholder="Nome do usu√°rio / aluno">
  <input id="serie" placeholder="S√©rie / Ano (Trabalho Escolar)">
  <input id="telefone" placeholder="Telefone / Contato (PDF ou Curr√≠culo)">
  <textarea id="tema" placeholder="Tema / Assunto"></textarea>

  <button onclick="gerar()">Gerar Conte√∫do</button>
</div>

<div class="card">
  <pre id="resultado">O conte√∫do gerado aparecer√° aqui...</pre>
</div>

<div class="timeline" id="timeline"></div>

</div>

<script>
// Lista de temas proibidos
const palavrasSensiveis = ["viol√™ncia extrema","drogas ilegais","ataques","conte√∫do ilegal"];
const usuarios = {};

async function gerar() {
  const tipo = document.getElementById("tipo").value;
  const nome = document.getElementById("nome").value;
  const serie = document.getElementById("serie").value;
  const telefone = document.getElementById("telefone").value;
  const tema = document.getElementById("tema").value;
  const resultado = document.getElementById("resultado");
  const timeline = document.getElementById("timeline");

  if(!tipo){ alert("Escolha um tipo de conte√∫do"); return; }
  if(!tema){ alert("Digite um tema ou assunto"); return; }

  const usuarioId = "user_local"; 
  if(!usuarios[usuarioId]) usuarios[usuarioId] = { cont:0, bloqueio:0 };
  const agora = Date.now();
  if(usuarios[usuarioId].bloqueio > agora){
    const hora = new Date(usuarios[usuarioId].bloqueio).toLocaleTimeString();
    alert(`Voc√™ est√° suspenso at√© ${hora} por tentar gerar conte√∫do proibido.`);
    return;
  }

  if(palavrasSensiveis.some(p => tema.toLowerCase().includes(p))){
    usuarios[usuarioId].cont += 1;
    const horas = Math.pow(2, usuarios[usuarioId].cont-1);
    usuarios[usuarioId].bloqueio = agora + horas*60*60*1000;
    alert(`Tema proibido detectado! Voc√™ ser√° suspenso por ${horas} hora(s).`);
    return;
  }

  resultado.innerText = "‚è≥ Gerando conte√∫do com IA... aguarde!";
  timeline.innerHTML = "";

  let prompt = "";
  let etapas = [];

  if(tipo === "roteiro"){
    prompt = `Crie um roteiro completo de v√≠deo sobre o tema: ${tema}. Inclua abertura, introdu√ß√£o, desenvolvimento, cl√≠max, conclus√£o.`;
    etapas = ["Abertura","Introdu√ß√£o","Desenvolvimento","Cl√≠max","Conclus√£o"];
  } else if(tipo === "pdf"){
    prompt = `Crie um PDF profissional sobre o tema: ${tema}. Inclua telefone/contato: ${telefone}, introdu√ß√£o, desenvolvimento e conclus√£o.`;
    etapas = ["Introdu√ß√£o","Desenvolvimento","Conclus√£o"];
  } else if(tipo === "trabalho"){
    prompt = `Crie um trabalho escolar detalhado para o aluno ${nome}, s√©rie ${serie}, sobre o tema ${tema}. Inclua introdu√ß√£o, desenvolvimento, conclus√£o e refer√™ncias.`;
    etapas = ["Introdu√ß√£o","Desenvolvimento","Conclus√£o"];
  } else if(tipo === "curriculo"){
    prompt = `Crie um curr√≠culo profissional para ${nome}, telefone/contato: ${telefone}, objetivo: ${tema}. Inclua experi√™ncia, forma√ß√£o e habilidades detalhadas.`;
    etapas = ["Objetivo","Experi√™ncia","Forma√ß√£o","Habilidades"];
  } else if(tipo === "historia"){
    prompt = `Crie uma hist√≥ria original sobre o tema ${tema}. Inclua introdu√ß√£o, desenvolvimento, cl√≠max e conclus√£o detalhados.`;
    etapas = ["Introdu√ß√£o","Desenvolvimento","Cl√≠max","Conclus√£o"];
  }

  // Cria timeline visual igual √† foto
  timeline.innerHTML = etapas.map(e => `<div class="timeline-step">${e}</div>`).join("");

  // Chamada IA OpenAI
  try {
    const response = await fetch("https://api.openai.com/v1/chat/completions", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "Authorization": "Bearer SUA_CHAVE_API_AQUI"
      },
      body: JSON.stringify({
        model: "gpt-4",
        messages: [{role:"user", content: prompt}],
        max_tokens: 3000
      })
    });
    const data = await response.json();
    resultado.innerText = data.choices[0].message.content;

    // Marca cada etapa como conclu√≠da
    document.querySelectorAll(".timeline-step").forEach(step => step.classList.add("active"));

  } catch(err){
    resultado.innerText = "‚ùå Erro ao gerar conte√∫do: "+err;
  }
}
</script>

</body>
</html>
